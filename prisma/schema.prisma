// This is your Prisma schema file,
// learn more about it in the docs: https://pris.ly/d/prisma-schema

// Looking for ways to speed up your queries, or scale easily with your serverless or edge functions?
// Try Prisma Accelerate: https://pris.ly/cli/accelerate-init

generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "mysql"
  url      = env("DATABASE_URL")
}

model StockWatchlist {
  id Int @id @default(autoincrement())
  code String @unique
  lowerPrice Float?
  upperPrice Float?
  createdAt  DateTime   @default(now())
}

model WatchlistNotification {
  code String @unique
  isSent Boolean
  createdAt  DateTime   @default(now())
}

model HSXMarket {
  id Int @id @default(autoincrement())
  code String @unique
  createdAt  DateTime   @default(now())
}

model UpcomMarket {
  id Int @id @default(autoincrement())
  code String @unique
  createdAt  DateTime   @default(now())
}

model HNXMarket {
  id Int @id @default(autoincrement())
  code String @unique
  createdAt  DateTime   @default(now())
}

model StockFilter {
  id Int @id @default(autoincrement())
  marketCap BigInt
  pe Float
  eps Float
  beta Float
  avgVolume10d Int
}

model VolumeWatchlist {
  id Int @id @default(autoincrement())
  createdAt  DateTime   @default(now())

  code String @unique
}

model VolumeWatchlistNotificationDaily {
  id Int @id @default(autoincrement())
  createdAt  DateTime   @default(now())

  code String @unique
  isNotificationSent Boolean @default(false)
  description String? @default("")
  riskLevel String? @default("")
}

model VolumeWatchlistNotificationRealtime {
  id Int @id @default(autoincrement())
  createdAt  DateTime   @default(now())

  code String @unique
  isNotificationSent Boolean @default(false)
  description String? @default("")
  riskLevel String? @default("")
}

model PriceWatchlistNotificationRealtime {
  id Int @id @default(autoincrement())
  createdAt  DateTime   @default(now())

  code String @unique
  isNotificationSent Boolean @default(false)
  description String? @default("")
  riskLevel String? @default("")
}

model HistoricalData {
  id Int @id @default(autoincrement())
  date DateTime
  symbol String
  totalVolume Int
  dealVolume Int
  putthroughVolume Int
  putthroughValue Int
  propTradingNetDealValue Int
  propTradingNetPTValue Int
  propTradingNetValue Int
  unit Int

  priceHigh Float
  priceLow Float
  priceOpen Float
  priceAverage Float
  priceClose Float
  priceBasic Float
  adjRatio Float
  sellForeignValue Float
  buyForeignValue Float

  currentForeignRoom BigInt
  totalValue BigInt
  buyForeignQuantity BigInt
  sellForeignQuantity BigInt
  buyCount BigInt
  buyQuantity BigInt
  sellCount BigInt
  sellQuantity BigInt

  @@index(fields: [symbol])
}

model DatabricksHistoricalData {
  id Int @id @default(autoincrement())
  date DateTime @default(now())
  symbol String
  lookbackDays Int
  isGoodBuyingPoint Boolean
  reasons String?
  riskLevel String
}

model TickerSuggestion {
  id Int @id @default(autoincrement())
  code String @unique
  userId String
  postId String?
  createdAt  DateTime   @default(now())

  @@index(fields: [code, userId])
}
